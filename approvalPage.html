<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Persetujuan Laporan Stok Bibit</title>
  <style>
    body { font-family: sans-serif; text-align: center; margin-top: 100px; background: #f4f4f4; }
    button { margin: 10px; padding: 10px 20px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; }
    .approve { background: #16a34a; color: white; }
    .reject { background: #dc2626; color: white; }
  </style>
</head>
<body>
  <h2>Persetujuan Laporan Stok Bibit</h2>
  <p id="info">Klik salah satu tombol di bawah:</p>

  <button class="approve" onclick="sendApproval('Approved')">‚úÖ Setujui</button>
  <button class="reject" onclick="sendApproval('Rejected')">‚ùå Tolak</button>

  <p id="status"></p>

  <script>
    // üîó Ganti dengan URL Sheety kamu sendiri
    const SHEETY_URL = "https://api.sheety.co/123abc456def/aproval/sheet1";

    // Contoh data uji
    const jabatan = "Kepala Nursery";
    const periode = "Oktober 2025";

    async function sendApproval(status) {
      document.getElementById("status").innerText = "‚è≥ Menyimpan data...";
      const waktu = new Date().toLocaleString("id-ID");

      const body = {
        sheet1: {
          periode: periode,
          jabatan: jabatan,
          status: status,
          waktu: waktu
        }
      };

      try {
        const res = await fetch(SHEETY_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(body)
        });

        if (!res.ok) throw new Error("Gagal menyimpan data");

        document.getElementById("status").innerText = "‚úÖ Data berhasil disimpan ke Sheety!";
      } catch (err) {
        document.getElementById("status").innerText = "‚ùå Error: " + err.message;
      }
    }
  </script>
</body>
</html>
